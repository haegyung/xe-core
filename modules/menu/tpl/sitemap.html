<load target="./js/menu_admin.js" />
<load target="../../admin/tpl/js/sitemap.js" />
<load target="./js/sitemap.js" />

<div class="content" id="content">
	<div cond="$XE_VALIDATOR_MESSAGE" class="message {$XE_VALIDATOR_MESSAGE_TYPE}">
		<p>{$XE_VALIDATOR_MESSAGE}</p>
	</div>
	<h1 class="h1">{$lang->menu_gnb_sub['siteMap']}</h1>

	<block loop="$menu_list=>$key,$value">
	{@$menuSrl = $value->menuSrl}
	<form class="portlet siteMap" id="menu_{$menuSrl}">
	<input type="hidden" name="act" value="procMenuAdminDeleteItem" />
	<input type="hidden" name="menu_srl" value="{$menuSrl}" />
	<input type="hidden" name="menu_item_srl" value="" />
	<input type="hidden" name="success_return_url" value="{getUrl('', 'module', 'admin', 'act', 'dispMenuAdminSiteMap')}" />

		<h2 class="h2"><input name="title" value="{$value->title}" /></h2>
		<a href="#nav_{$key}" class="tgMap">{$lang->collapsing}/{$lang->expanding}</a>
		<ul class="lined" id="nav_{$key}" cond="count($value->menuItems->list > 0)">
		<block loop="$value->menuItems->list=>$key2,$value2">
		{@$item = $value2}
		<include target="sitemap.item.html" />
		</block>
		</ul>
		<p class="btnArea"><span class="btn small"><a href="#editMenu" class="modalAnchor _add">{$lang->add_menu}</a></span> <span class="btn small"><button value="procMenuAdminArrangeItem" name="act" type="submit">{$lang->cmd_save}</button></span><span class="btn small"><a href="#remakeCache" onclick="doReloadTreeMenu('{$menuSrl}');return false;">{$lang->cmd_remake_cache}</a></span></p>
	</form>
	</block>

	<form action="./" method="post" class="form">
	<input type="hidden" name="act" value="procMenuAdminInsert" />
	<input type="hidden" name="title" value="untitled" />
	<input type="hidden" name="success_return_url" value="{getUrl('', 'module', 'admin', 'act', 'dispMenuAdminSiteMap')}" />
	<div class="btnArea">
		<span class="btn medium"><button type="submit">{$lang->add_new_sitemap}</button></span>
	</div>
	</form>
	<div class="modal" id="editMenu">
		<div class="fg">
			<form ruleset="insertMenuItem" id="editForm" action="./" method="post" enctype="multipart/form-data" class="form">
			<input type="hidden" name="act" value="procMenuAdminInsertItem" />
			<input type="hidden" name="menu_srl" value="" />
			<input type="hidden" name="menu_item_srl" value="{$menu_info->menu_srl}" />
			<input type="hidden" name="parent_srl" value="{$menu_info->menu_srl}" />
				<h2 class="h2"></h2>
				<ul>
					<li>
						<p class="q"><label for="name">{$lang->menu_name}</label></p>
						<div class="a multiLangEdit">
							<input type="hidden" class="vLang" name="menu_name_key" />
							<input type="text" class="vLang" id="name" name="menu_name" /> 
							<!-- Suggestion -->
							<div id="vLangSuggest" class="suggestion">
								<ul>
									<li><button type="button">다국어 하나</button></li>
									<li><button type="button">다국어 둘</button></li>
								</ul>
							</div>
							<!-- /Suggestion -->
							<!-- Multilingual -->
							<div id="langEdit" class="langEdit tgContent">
								<ul>
									<li class="ko"><label for="ko_var1">Korean</label> <input type="text" value="안녕 세상아!" id="ko_var1" /></li>
									<li class="en"><label for="en_var1">English</label> <input type="text" value="Hello World!" id="en_var1" /></li>
									<li class="ja"><label for="ja_var1">Japanese</label> <input type="text" value="" id="ja_var1" /></li>
									<li class="zh"><label for="zhcn_var1">Chinese(Simplified)</label> <input type="text" value="" id="zhcn_var1" /></li>
									<li class="zh"><label for="zhtw_var1">Chinese(Traditional)</label> <input type="text" value="" id="zhtw_var1" /></li>
									<li class="fr"><label for="fr_var1">French</label> <input type="text" value="" id="fr_var1" /></li>
									<li class="de"><label for="de_var1">Deutsch</label> <input type="text" value="" id="de_var1" /></li>
									<li class="ru"><label for="ru_var1">Russian</label> <input type="text" value="" id="ru_var1" /></li>
									<li class="es"><label for="es_var1">Spanish</label> <input type="text" value="" id="es_var1" /></li>
									<li class="tr"><label for="tr_var1">Turkish</label> <input type="text" value="" id="tr_var1" /></li>
									<li class="vi"><label for="vi_var1">Vietnamese</label> <input type="text" value="" id="vi_var1" /></li>
									<li class="mn"><label for="mn_var1">Mongolian</label> <input type="text" value="" id="mn_var1" /></li>
								</ul>
								<div class="action">
									<!-- 여기부터 기존 랭귀지 변수를 수정한 경우에만 보인다 -->
									<p>다국어 텍스트가 변경되었습니다. <em>업데이트</em> 버튼을 클릭하면 같은 텍스트를 사용하는 다른 페이지에도 반영됩니다. <em>새로 저장</em> 버튼을 클릭하면 이 페이지에만 적용됩니다.</p>
									<div class="btnArea">
										<span class="btn small"><input type="submit" value="업데이트" /></span> 
										<span class="btn small"><input type="submit" value="새로저장" /></span> 
									</div>
									<!-- 여기까지 기존 랭귀지 변수를 수정한 경우에만 보인다 -->
									<p><a href="#">다국어 텍스트 관리</a></p>
								</div>
							</div>
							<!-- /Multilingual -->
							<span class="desc"><a href="#langEdit" class="editUserLang tgAnchor">Multilingual</a></span>
						</div>
					</li>
					<li>
						<p class="q">{$lang->module_or_url}?</p>
						<p class="a">
							<input type="radio" name="cType" id="cModule" class="_typeCheck" value="CREATE" /> <label for="cModule">{$lang->create_module_in_menu}</label>
							<input type="radio" name="cType" id="sModule" class="_typeCheck" value="SELECT" /> <label for="sModule">{$lang->select_module_in_menu}</label>
							<input type="radio" name="cType" id="url" class="_typeCheck" value="URL" /> <label for="url">{$lang->menu_url}</label>
						</p>
					</li>
					<li id="kindModule">
						<p class="q"><label for="kModule">{$lang->select_module}</label></p>
						<p class="a">
							<select style="width:290px" id="kModule" name="module_type">
								<option loop="$module_list=>$key,$value" value="{$value}">{$value}</option>
							</select>
						</p>
					</li>
					<li id="createModule">
						<p class="q"><label for="cModule_id">{$lang->create_mid_in_menu}.</label></p>
						<div class="a">
							<input type="text" id="cModule_id" name="create_menu_url" />
							<span class="desc"><button type="button" class="text">Validation Check</button></span>
						</div>
					</li>
					<li id="selectModule">
						<p class="q"><label for="sModule_id">{$lang->select_mid_in_menu}</label></p>
						<p class="a">
							<select style="width:290px" id="sModule_id" name="select_menu_url">
							</select>
						</p>
					</li>
					<li id="insertUrl">
						<p class="q"><label for="link_url">{$lang->menu_url}</label></p>
						<div class="a">
							<input type="text" id="link_url" name="menu_url" value="http://" />
						</div>
					</li>
					<li>
						<p class="q">{$lang->about_menu_open_window}</p>
						<p class="a">
							<input type="radio" name="menu_open_window" id="self" value="N" /> <label for="self">{$lang->menu_self_window}</label>
							<input type="radio" name="menu_open_window" id="blank" value="Y" /> <label for="blank">{$lang->menu_open_window}</label>
						</p>
					</li>
					<li>
						<p class="q">{$lang->menu_img_btn}</p>
						<p class="a">
							<span id="normal_btn_preview"></span>
							<input type="file" name="menu_normal_btn" id="menu_normal_btn" /> <label for="menu_normal_btn">{$lang->menu_normal_btn}</label><br />
							<span id="hover_btn_preview"></span>
							<input type="file" name="menu_hover_btn" id="menu_hover_btn" /> <label for="menu_hover_btn">{$lang->menu_hover_btn}</label><br />
							<span id="active_btn_preview"></span>
							<input type="file" name="menu_active_btn" id="menu_active_btn" /> <label for="menu_active_btn">{$lang->menu_active_btn}</label>
						</p>
					</li>
					<li>
						<p class="q">{$lang->menu_group_srls}</p>
						<p class="a" id="groupList">
							<block loop="$group_list=>$key,$value"><input type="checkbox" name="group_srls[]" id="group_srls_{$value->group_srl}" value="{$value->group_srl}" /> <label for="group_srls_{$value->group_srl}">{$value->title}</label></block>
						</p>
					</li>
				</ul>
				<div class="btnArea">
					<span class="btn"><input type="submit" value="{$lang->cmd_save}" /></span>
				</div>
			</form>
		</div>
	</div>
</div>
