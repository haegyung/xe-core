<load target="../../admin/tpl/js/sitemap.js" />
<load target="./js/sitemap.js" />

<div class="content" id="content">
	<div cond="$XE_VALIDATOR_MESSAGE" class="message {$XE_VALIDATOR_MESSAGE_TYPE}">
		<p>{$XE_VALIDATOR_MESSAGE}</p>
	</div>
	<h1 class="h1">Site Map</h1>
	<!--@foreach($menu_list AS $key=>$value)-->
	{@$menu_srl = $value->menu_srl}
	<form class="portlet siteMap" id="menu_{$menu_srl}">
	<input type="hidden" name="act" value="procMenuAdminDeleteItem" />
	<input type="hidden" name="menu_srl" value="{$value->menu_srl}" />
	<input type="hidden" name="menu_item_srl" value="" />
	<input type="hidden" name="success_return_url" value="{getUrl('', 'module', 'admin', 'act', 'dispMenuAdminSiteMap')}" />

		<h2 class="h2"><input name="title" value="{$value->title}" /></h2>
		<a href="#nav1" class="tgMap">접기</a>
		<ul class="lined" id="nav1">
			<li loop="$value->menuItems=>$key2,$value2">
				<input type="hidden" name="parent_key[]" value="0" class="_parent_key" />
				<input type="hidden" name="item_key[]" value="{$key2}" class="_item_key" />
				<a href="#" class="ms">{$value2['name']}</a> <a href="#" class="wPreview" target="_blank">Preview</a>
				<span class="side"><a href="#editMenu" class="modalAnchor _edit">Edit...</a> | <a href="#delete" class="_delete">Delete</a></span>
				<ul cond="$value2['subMenu']>0">
					<li loop="$value2['subMenu']=>$key3,$value3">
					<input type="hidden" name="parent_key[]" value="{$key2}" class="_parent_key" />
					<input type="hidden" name="item_key[]" value="{$key3}" class="_item_key" />
					{$value3->name} <a href="#" class="wPreview" target="_blank">Preview</a> <span class="side"><a href="#editMenu" class="modalAnchor _edit">Edit...</a> | <a href="#delete" class="_delete">Delete</a></span>
					</li>
				</ul>
			</li>
		</ul>
		<p class="btnArea"><span class="btn small"><a href="#editMenu" class="modalAnchor _add">Add Menu...</a></span> <span class="btn small"><button value="procMenuAdminArrangeItem" name="act" type="submit">{$lang->cmd_save}</button></span></p>
	</form>
	<!--@end-->
	<div class="btnArea">
		<span class="btn medium"><button type="button">Add New Site Map...</button></span>
	</div>
	<div class="modal" id="editMenu">
		<div class="fg">
			<form ruleset="insertMenuItem" id="editForm" action="./" method="post" enctype="multipart/form-data" class="form">
			<input type="hidden" name="act" value="procMenuAdminInsertItem" />
			<input type="hidden" name="menu_srl" value="" />
			<input type="hidden" name="menu_item_srl" value="{$menu_info->menu_srl}" />
			<input type="hidden" name="parent_srl" value="{$menu_info->menu_srl}" />
				<h2 class="h2"></h2>
				<ul>
					<li>
						<p class="q"><label for="name">Name</label></p>
						<div class="a multiLangEdit">
							<input type="hidden" class="vLang" name="menu_name_key" />
							<input type="text" class="vLang" id="name" name="menu_name" /> 
							<!-- Suggestion -->
							<div id="vLangSuggest" class="suggestion">
								<ul>
									<li><button type="button">다국어 하나</button></li>
									<li><button type="button">다국어 둘</button></li>
								</ul>
							</div>
							<!-- /Suggestion -->
							<!-- Multilingual -->
							<div id="langEdit" class="langEdit tgContent">
								<ul>
									<li class="ko"><label for="ko_var1">Korean</label> <input type="text" value="안녕 세상아!" id="ko_var1" /></li>
									<li class="en"><label for="en_var1">English</label> <input type="text" value="Hello World!" id="en_var1" /></li>
									<li class="ja"><label for="ja_var1">Japanese</label> <input type="text" value="" id="ja_var1" /></li>
									<li class="zh"><label for="zhcn_var1">Chinese(Simplified)</label> <input type="text" value="" id="zhcn_var1" /></li>
									<li class="zh"><label for="zhtw_var1">Chinese(Traditional)</label> <input type="text" value="" id="zhtw_var1" /></li>
									<li class="fr"><label for="fr_var1">French</label> <input type="text" value="" id="fr_var1" /></li>
									<li class="de"><label for="de_var1">Deutsch</label> <input type="text" value="" id="de_var1" /></li>
									<li class="ru"><label for="ru_var1">Russian</label> <input type="text" value="" id="ru_var1" /></li>
									<li class="es"><label for="es_var1">Spanish</label> <input type="text" value="" id="es_var1" /></li>
									<li class="tr"><label for="tr_var1">Turkish</label> <input type="text" value="" id="tr_var1" /></li>
									<li class="vi"><label for="vi_var1">Vietnamese</label> <input type="text" value="" id="vi_var1" /></li>
									<li class="mn"><label for="mn_var1">Mongolian</label> <input type="text" value="" id="mn_var1" /></li>
								</ul>
								<div class="action">
									<!-- 여기부터 기존 랭귀지 변수를 수정한 경우에만 보인다 -->
									<p>다국어 텍스트가 변경되었습니다. <em>업데이트</em> 버튼을 클릭하면 같은 텍스트를 사용하는 다른 페이지에도 반영됩니다. <em>새로 저장</em> 버튼을 클릭하면 이 페이지에만 적용됩니다.</p>
									<div class="btnArea">
										<span class="btn small"><input type="submit" value="업데이트" /></span> 
										<span class="btn small"><input type="submit" value="새로저장" /></span> 
									</div>
									<!-- 여기까지 기존 랭귀지 변수를 수정한 경우에만 보인다 -->
									<p><a href="#">다국어 텍스트 관리</a></p>
								</div>
							</div>
							<!-- /Multilingual -->
							<span class="desc"><a href="#langEdit" class="editUserLang tgAnchor">Multilingual</a></span>
						</div>
					</li>
					<li>
						<p class="q">Module or URL?</p>
						<p class="a">
							<input type="radio" name="cType" id="cModule" class="_typeCheck" value="CREATE" /> <label for="cModule">Create Module</label>
							<input type="radio" name="cType" id="sModule" class="_typeCheck" value="SELECT" /> <label for="sModule">Select Module</label>
							<input type="radio" name="cType" id="url" class="_typeCheck" value="URL" /> <label for="url">URL</label>
						</p>
					</li>
					<li id="kindModule">
						<p class="q"><label for="kModule">What kind of module?</label></p>
						<p class="a">
							<select style="width:290px" id="kModule">
								<option loop="$module_list=>$key,$value" value="{$value}">{$value}</option>
							</select>
						</p>
					</li>
					<li id="createModule">
						<p class="q"><label for="cModule_id">Create module ID.</label></p>
						<div class="a">
							<input type="text" id="cModule_id" name="create_menu_url" />
							<span class="desc"><button type="button" class="text">Validation Check</button></span>
						</div>
					</li>
					<li id="selectModule">
						<p class="q"><label for="sModule_id">Select module ID.</label></p>
						<p class="a">
							<select style="width:290px" id="sModule_id" name="select_menu_url">
							</select>
						</p>
					</li>
					<li id="insertUrl">
						<p class="q"><label for="link_url">Insert URL.</label></p>
						<div class="a">
							<input type="text" id="link_url" name="menu_url" value="http://" />
						</div>
					</li>
					<li>
						<p class="q">Which window should be open?</p>
						<p class="a">
							<input type="radio" name="menu_open_window" id="self" value="N" /> <label for="self">Self</label>
							<input type="radio" name="menu_open_window" id="blank" value="Y" /> <label for="blank">Blank</label>
						</p>
					</li>
					<li>
						<p class="q">Display image.</p>
						<p class="a">
							<span id="normal_btn_preview"></span>
							<input type="file" name="menu_normal_btn" id="menu_normal_btn" /> <label for="menu_normal_btn">Normal Image</label><br />
							<span id="hover_btn_preview"></span>
							<input type="file" name="menu_hover_btn" id="menu_hover_btn" /> <label for="menu_hover_btn">Hover Image</label><br />
							<span id="active_btn_preview"></span>
							<input type="file" name="menu_active_btn" id="menu_active_btn" /> <label for="menu_active_btn">Active Image</label>
						</p>
					</li>
					<li>
						<p class="q">Authority for access.</p>
						<p class="a" id="groupList">
							<block loop="$group_list=>$key,$value"><input type="checkbox" name="group_srls[]" id="group_srls_{$value->group_srl}" value="{$value->group_srl}" /> <label for="group_srls_{$value->group_srl}">{$value->title}</label></block>
						</p>
					</li>
				</ul>
				<div class="btnArea">
					<span class="btn"><input type="submit" value="{$lang->cmd_save}" /></span>
				</div>
			</form>
		</div>
	</div>
</div>
