<include cond="$in_admin" target="header.html" />
<load target="js/generate_code.js" />
<load target="js/multi_order.js" />
<load target="js/module_list.js" />
<!--%load_js_plugin("ui.colorpicker")-->
<h2 class="h2">{$widget_info->title}</h2>
<p>{$widget_info->description}</p>
<form class="form" action="./" method="post">
	<input type="hidden" name="selected_widget" value="{$widget_info->widget}" />
	<h3 class="h3">{$lang->cmd_generate_code}</h3>
	<p>{$lang->about_widget_code}</p>
	<ul>
		<li>
			<p class="q"><label for="skin">{$lang->skin}</label></p>
			<a class="a">
				<select name="skin" id="skin" style="width:280px">
					<option value="">{$lang->select}</option>
					<option loop="$skin_list => $skin_name, $skin" value="{$skin_name}">{$skin->title} ({$skin_name})</option>
				</select>
				<input type="button" value="{$lang->cmd_select}" />
			</a>
		</li>
		<li>
			<p class="q"><label for="colorset">{$lang->colorset}</label></p>
			<p class="a">
				<select name="colorset" style="width:280px">
				</select>
			</p>
		</li>
		<li>
			<p class="q"><label for="widget_cache">{$lang->widget_cache}</label></p>
			<p class="a">
				<input type="text" name="widget_cache" id="widget_cache" value="0" size="2" style="width:auto" /> {$lang->unit_min}
				({$lang->about_widget_cache})
			</p>
		</li>
	</ul>
	{@$suggestion_id = 0}
	<block loop="$widget_info->extra_var => $id, $var">
		{@$suggestion_id++}
		<block cond="!$not_first && !$var->group"><ul></block>
		<block cond="$group != $var->group">
			<block cond="$not_first"></ul></block>
			<h3 class="h3">{$var->group}</h3>
			<ul>
			{@$group = $var->group}
		</block>
		{@$not_first = true}
		<li class="modulefinder"|cond="$var->type == 'mid' || $var->type == 'module_srl_list'">
			<p class="q"><label for="{$id}">{$var->name}</label></p>
			<div class="a">
				<input cond="$var->type == 'text'" type="text" name="{$id}" value="" id="{$id}" />
				<input cond="$var->type == 'color'" type="text" name="{$id}" value="" id="{$id}" class="color-indicator" />
				<textarea cond="$var->type == 'textarea'" name="{$id}" id="{$id}"></textarea>
				<select cond="$var->type == 'select'" name="{$id}" id="{$id}" style="width:290px">
					<option loop="$var->options => $key, $val" value="{$key}">{$val}</option>
				</select>
				<block cond="$var->type == 'select-multi-order'">
					<input type="hidden" name="{$id}" value="" />
					<select class="multiorder_show" size="8" multiple="multiple" style="width:290px;vertical-align:top"></select>
					<button type="button" class="text multiorder_add" style="vertical-align:top">{$lang->cmd_insert}</button>
					<select class="multiorder_selected" size="8" multiple="multiple" style="width:290px;vertical-align:top"></select>
					<button type="button" class="text multiorder_up" style="vertical-align:top">{$lang->cmd_move_up}</button>
					<button type="button" class="text multiorder_down" style="vertical-align:top">{$lang->cmd_move_down}</button>
					<button type="button" class="text multiorder_del" style="vertical-align:top">{$lang->cmd_delete}</button>
					<script type="text/javascript">
						var options = [
						<block loop="$var->options => $key, $val">
							{
								<block cond="$var->init_options[$key]">
									'init': true,
								</block>
								<block cond="!$var->init_options[$key]">
									'init': false,
								</block>
								<block cond="$var->default_options[$key]">
									'default': true,
								</block>
								<block cond="!$var->default_options[$key]">
									'default': false,
								</block>
								'key': '{$key}',
								'value': '{$val}'
							},
						</block>
						];
						new MultiOrderManager('{$id}', options);
					</script>
				</block>
				<block cond="$var->type == 'mid_list'">
				{@debugPrint($mid_list)}
					<fieldset loop="$mid_list => $module_category_srl, $modules" style="border: 1px solid #ccc; margin:1em 0; padding:.5em 1em">
						<legend cond="$modules->title">{$modules->title}</legend>
						<legend cond="!$modules->title">{$lang->none_category}</legend>
						<div loop="$modules->list => $key, $val">
							<input type="checkbox" value="{$key}" name="{$id}" id="chk_mid_list_{$key}" />
							<label for="chk_mid_list_{$key}">{$key} ({$val->browser_title})</label>
						</div>
					</fieldset>
				</block>
				<block cond="$var->type == 'member_group'">
					<block loop="$group_list => $key, $val">
						<input type="checkbox" value="{$key}" name="{$id}" id="chk_member_gruop_{$id}_{$key}" />
						<label for="chk_member_gruop_{$id}_{$key}">{$val->title}</label>
					</block>
				</block>
				<block cond="$var->type == 'module_srl_list'">
					<input type="hidden" name="{$id}" value="" />
					<div class="a">
						<input type="text" /> <a href="#suggestion_{$suggestion_id}" class="tgAnchor findsite">사이트찾기</a>
						<div id="suggestion_{$suggestion_id}" class="tgContent suggestion">
							<ul>
							</ul>
						</div>
					</div>
					<p class="a">
						<select class="moduleList" style="width:290px"></select>
					</p>
					<select class="moduleIdList" size="8" multiple="multiple" style="width:290px;vertical-align:top"></select>
					<button type="button" class="text modulelist_add" style="vertical-align:top">{$lang->cmd_insert}</button>
					<select class="modulelist_selected" size="8" multiple="multiple" style="width:290px;"></select>
					<button type="button" class="text modulelist_up" style="vertical-align:top">{$lang->cmd_move_up}</button>
					<button type="button" class="text modulelist_down" style="vertical-align:top">{$lang->cmd_move_down}</button>
					<button type="button" class="text modulelist_del" style="vertical-align:top">{$lang->cmd_delete}</button>
					<script type="text/javascript">
					xe.registerApp(new xe.ModuleListManager('{$id}'));
					</script>
				</block>
				<block cond="$var->type == 'mid'">
					<div class="a">
						<input type="text" /> <a href="#suggestion_{$suggestion_id}" class="tgAnchor findsite">사이트찾기</a>
						<div id="suggestion_{$suggestion_id}" class="tgContent suggestion">
							<ul>
							</ul>
						</div>
					</div>
					<p class="a"><select class="moduleList" style="width:290px;"></select></p>
					<p class="a"><select name="{$id}" class="moduleIdList" style="width:290px;"></select></p>
				</block>
				<block cond="$var->type == 'filebox'">
					<div id="filebox_preview_{$id}" style="width:100px;height:100px;display:none" ></div>
					<input type="hidden" name="{$id}" value="" />
					<span class="button black"><button type="button" onclick="XE.filebox.open(jQuery('[name={$id}]', '#fo_widget').get(0), '{$var->filter}')">{$lang->cmd_select}</button></span>
					<span id="filebox_cancel_{$id}" class="button red" style="display:none" ><button type="button" onclick="XE.filebox.cancel('{$id}')">{$lang->cmd_delete}</button></span>
					<script type="text/javascript">//<![CDATA[
						XE.filebox.init('{$id}');
					//]]></script>
				</block>
				<select cond="$var->type == 'menu'" style="width:290px">
					<option value="">-</option>
					<option loop="$menu_list => $key, $val" value="{$val->menu_srl}">{$val->title}</option>
				</select>
			</div>
			<p class="desc">{$var->description}</p>
		</li>
	</block>
	</ul>
</form>
