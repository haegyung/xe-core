<!--%import("filter/modify_info.xml")-->
<!--@if($member_config->image_name == 'Y')-->
    <!--%import("filter/delete_image_name.xml")-->
<!--@end-->
<!--@if($member_config->image_mark == 'Y')-->
    <!--%import("filter/delete_image_mark.xml")-->
<!--@end-->
<!--%import("js/member.js")-->
<!--%import("../../tpl/js/krzip_search.js")-->
<div>
    {$lang->msg_update_member}
</div>

<form id="fo_insert_member" action="./" method="post" onsubmit="return procFilter(this, modify_info)" <!--@if($member_config->image_name=='Y' || $member_config->image_mark=='Y')-->enctype="multipart/form-data"<!--@end-->>
<input type="hidden" name="mid" value="{$mid}" />
<input type="hidden" name="act" value="" />
<input type="hidden" name="document_srl" value="{$document_srl}" />
<input type="hidden" name="member_srl" value="{$member_info->member_srl}" />
<input type="hidden" name="content" value="{htmlspecialchars($member_info->signature)}" />
<input type="hidden" name="page" value="{$page}" />

    <div>
        {$lang->member_default_info}
    </div>
    <table border="1">
    <tr>
        <th>{$lang->user_id}</th>
        <td>
            {htmlspecialchars($member_info->user_id)}
        </td>
    </tr>
    <tr>
        <th>{$lang->user_name}</th>
        <td>
            {htmlspecialchars($member_info->user_name)}
        </td>
    </tr>
    <tr>
        <th rowspan="2">{$lang->nick_name}</th>
        <td>
            <input type="text" name="nick_name" value="{htmlspecialchars($member_info->nick_name)}" />
        </td>
    </tr>
    <tr>
        <td>{$lang->about_nick_name}</td>
    </tr>
    <tr>
        <th>{$lang->email_address}</th>
        <td>
            <input type="text" name="email_address" value="{htmlspecialchars($member_info->email_address)}" />
        </td>
    </tr>
    <!--@if($member_config->image_name == 'Y')-->
    <tr>    
        <th>{$lang->image_name}</th>
        <td>
            <!--@if($member_info->image_name->src)-->
            <div>
                    <img src="{$member_info->image_name->src}" border="0" alt="image_name" />
                    [<a href="#" onclick="doDeleteImageName({$member_info->member_srl});return false;">{$lang->cmd_delete}</a>]
            </div> 
            <!--@end-->
            <input type="file" name="image_name" value="" /><input type="button" value="{$lang->cmd_registration}" onclick="doUploadImageName();return false;"/>
        </td>
    </tr>
    <!--@end-->
    <!--@if($member_config->image_mark == 'Y')-->
    <tr>    
        <th>{$lang->image_mark}</th>
        <td>
            <!--@if($member_info->image_mark->src)-->
            <div>
                    <img src="{$member_info->image_mark->src}" border="0" alt="image_mark" />
                    [<a href="#" onclick="doDeleteImageMark({$member_info->member_srl});return false;">{$lang->cmd_delete}</a>]
            </div> 
            <!--@end-->
            <input type="file" name="image_mark" value="" /><input type="button" value="{$lang->cmd_registration}" onclick="doUploadImageMark();return false;"/>
        </td>
    </tr>
    <!--@end-->
    <tr>
        <th rowspan="2">{$lang->homepage}</th>
        <td>
            <input type="text" name="homepage" value="{htmlspecialchars($member_info->homepage)}" />
        </td>
    </tr>
    <tr>
        <td>{$lang->about_homepage}</td>
    </tr>
    <tr>
        <th rowspan="2">{$lang->blog}</th>
        <td>
            <input type="text" name="blog" value="{htmlspecialchars($member_info->blog)}" />
        </td>
    </tr>
    <tr>
        <td>{$lang->about_blog}</td>
    </tr>
    <tr>
        <th rowspan="2">{$lang->birthday}</th>
        <td>
            <input type="hidden" name="birthday" id="date_birthday" value="{$member_info->birthday}" />
            <span id="str_birthday">{zdate($member_info->birthday,"Y-m-d")}</span>
            [<a href="#" onclick="open_calendar('birthday','{$member_info->birthday}');return false;">{$lang->cmd_open_calendar}</a>]
        </td>
    </tr>
    <tr>
        <td>{$lang->about_birthday}</td>
    </tr>
    <tr>
        <th rowspan="2">{$lang->allow_mailing}</th>
        <td><input type="checkbox" name="allow_mailing" value="Y" <!--@if($member_info->allow_mailing!='N')-->checked="true"<!--@end-->/></td>
    </tr>
    <tr>
        <td>{$lang->about_allow_mailing}</td>
    </tr>
    <tr>
        <th rowspan="2">{$lang->allow_message}</th>
        <td>
            <select name="allow_message">
                <!--@foreach($lang->allow_message_type as $key => $val)-->
                <option value="{$key}" <!--@if($member_info->allow_message == $key)-->selected="true"<!--@end-->>{$val}</option>
                <!--@end-->
            </select>
        </td>
    </tr>
    <tr>
        <td>{$lang->about_allow_message}</td>
    </tr>
    <tr>
        <th>{$lang->signature}</th>
        <td>{$editor}</td>
    </tr>
    </table>

    <!--@if($extend_form_list)-->
    <div>
        {$lang->member_extend_info}
    </div>

    <table border="1">
    <!--@foreach($extend_form_list as $key => $val)-->
        <!--@if($val->is_active=='Y')-->
    <tr>
        <th rowspan="2">
            <!--@if($val->required=='Y')-->
            *
            <!--@end-->
            {htmlspecialchars($val->column_title)}
        </th>
        <td>
            <!-- 일반 text -->
            <!--@if($val->column_type == 'text')--> 
                <input type="text" name="{$val->column_name}" value="{htmlspecialchars($val->value)}" />

            <!-- 홈페이지 주소 -->
            <!--@elseif($val->column_type == 'homepage')-->
                <input type="text" name="{$val->column_name}" value="{htmlspecialchars($val->value)}" />

            <!-- Email 주소 -->
            <!--@elseif($val->column_type == 'email_address')-->
                <input type="text" name="{$val->column_name}" value="{htmlspecialchars($val->value)}" />

            <!-- 전화번호 -->
            <!--@elseif($val->column_type == 'tel')-->
                <input type="text" name="{$val->column_name}" value="{htmlspecialchars($val->value[0])}" size="4" />-
                <input type="text" name="{$val->column_name}" value="{htmlspecialchars($val->value[1])}" size="4" />-
                <input type="text" name="{$val->column_name}" value="{htmlspecialchars($val->value[2])}" size="4" />

            <!-- textarea -->
            <!--@elseif($val->column_type == 'textarea')-->
                <textarea name="{$val->column_name}">{htmlspecialchars($val->value)}</textarea>

            <!-- 다중 선택 -->
            <!--@elseif($val->column_type == 'checkbox')-->
                <!--@if($val->default_value)-->
                    <!--@foreach($val->default_value as $v)-->
                        <input type="checkbox" name="{$val->column_name}" value="{$v}" <!--@if(is_array($val->value)&&in_array($v, $val->value))-->checked="true"<!--@end-->/>{$v}
                    <!--@end-->
                <!--@end-->

            <!-- 단일 선택 -->
            <!--@elseif($val->column_type == 'select')-->
                <select name="{$val->column_name}">
                <!--@if($val->default_value)-->
                    <!--@foreach($val->default_value as $v)-->
                        <option value="{$v}" <!--@if($v == $val->value)-->selected="true"<!--@end-->>{$v}</option>
                    <!--@end-->
                <!--@end-->
                </select>

            <!-- 한국 주소 검색 -->
            <!--@elseif($val->column_type == 'kr_zip')-->
                <div id="zone_address_1_{$val->column_name}" style="display:<!--@if($val->value[0])-->inline<!--@else-->none<!--@end-->;">
                    <input type="text" name="{$val->column_name}" value="{$val->value[0]}" />
                    <input type="button" value="{$lang->cmd_cancel}" onclick="doHideKrZipList('{$val->column_name}'); return false;" />
                </div>
                <div id="zone_address_list_{$val->column_name}" style="display:none">
                    <select name="_tmp_address_list_{$val->column_name}" style="width:240px;"></select>
                    <input type="button" value="{$lang->cmd_select}" onclick="doSelectKrZip('{$val->column_name}'); return false;" />
                    <input type="button" value="{$lang->cmd_cancel}" onclick="doHideKrZipList('{$val->column_name}'); return false;" />
                </div>
                <div id="zone_address_search_{$val->column_name}" style="display:<!--@if($val->value[0])-->none<!--@else-->inline<!--@end-->;">
                    <input type="text" name="_tmp_address_search_{$val->column_name}" value="" />
                    <input type="button" value="{$lang->cmd_search}" onclick="doSearchKrZip('{$val->column_name}'); return false;" />
                </div>

                <div>
                    <input type="text" name="{$val->column_name}" value="{htmlspecialchars($val->value[1])}" />
                </div>

            <!-- 일본 주소 검색 -->
            <!--@elseif($val->column_type == 'jp_zip')-->
                <input type="text" name="{$val->column_name}" value="{htmlspecialchars($val->value)}" />

            <!-- 날자 입력 -->
            <!--@elseif($val->column_type == 'date')-->
                <input type="hidden" name="{$val->column_name}" id="date_{$val->column_name}" value="{$val->value}" />
                <span id="str_{$val->column_name}">{zdate($val->value,"Y-m-d")}</span>
                [<a href="#" onclick="open_calendar('{$val->column_name}','{$val->value}');return false;">{$lang->cmd_open_calendar}</a>]

            <!--@end-->

        </td>
    </tr>
    <tr>
        <td>{$val->description}</td>
    </tr>
        <!--@end-->
    <!--@end-->
    </table>
    <!--@end-->

    <table border="1">
    <tr>
        <td colspan="2">
            <input type="button" value="{$lang->cmd_cancel}" onclick="location.href='{getUrl('act','dispMemberInfo','member_srl','')}'" />
            <input type="submit" value="{$lang->cmd_registration}" accesskey="s" />
        </td>
    </tr>
    </table>
</form>
