<!--%import("filter/search.xml")-->
<!--#include("header.html")-->

<!-- 게시물 내용 include -->
<!--@if($oDocument->isExists() && $grant->view)-->
    <!--#include("./view_document.html")-->
<!--@end-->

<!-- 목록 -->
<div>
    <table width="100%" border="1">
    <tr>
        <th>{$lang->no}</th>

        <!--@if($category_list)-->
        <th>
            <form action="./" method="get">
                <select name="category" onchange="doChangeCategory(this, '{getUrl('category','')}')" >
                    <option value="">{$lang->category}</option>
                    <!--@foreach($category_list as $val)-->
                    <option value="{$val->category_srl}" <!--@if($category==$val->category_srl)-->selected="selected"<!--@end-->>{$val->title} <!--@if($val->document_count)-->({$val->document_count})<!--@end--></option>
                    <!--@end-->
                </select>
            </form>
        </th>
    <!--@end-->

        <th>{$lang->title}</th>
        <th>{$lang->writer}</th>
        <th>{$lang->readed_count}</th>
        <th>{$lang->voted_count}</th>
        <th>{$lang->date}</th>
    </tr>

    <!--@foreach($document_list as $no => $document)-->
    <tr>
        <td>{$no}</td>

        <!--@if($category_list)-->
        <td>{$category_list[$document->get('category_srl')]->title}</td>
        <!--@end-->

        <td>
            <!--@if($grant->is_admin)-->
            <input type="checkbox" value="{$document->document_srl}" onclick="doAddCart('{$mid}',this)" <!--@if($check_list[$document->document_srl])-->checked="checked"<!--@end--> /> 
            <!--@end-->

            <!--@if($grant->view)-->
                <!-- 검색중일 경우는 새창으로 -->
                <!--@if($search_target && $search_keyword)-->
                    <a href="#" onclick="winopen('{getUrl('','document_srl',$document->document_srl)}','viewDocument');return false;">{$document->getTitleText($module_info->subject_cut_size)}</a>
                <!-- 검색을 하지 않을 시에는 현재창으로 -->
                <!--@else-->
                    <a href="{getUrl('','document_srl',$document->document_srl)}">{$document->getTitleText($module_info->subject_cut_size)}</a>
                <!--@end-->
            <!--@else-->
                {$document->getTitleText($module_info->subject_cut_size)}
            <!--@end-->

            <!--@if($document->getCommentCount())-->
                [<a href="{getUrl('document_srl',$document->document_srl)}#comment">{$document->getCommentCount()}</a>]
            <!--@end-->

            <!--@if($document->trackback_count>0)-->
                [<a href="{getUrl('document_srl',$document->document_srl)}#trackback">{$document->getTrackbackCount()}</a>]
            <!--@end-->

        </td>
        <td><div class="member_{$document->get('member_srl')}">{$document->getNickName()}</div></td>
        <td>{$document->get('readed_count')}</td>
        <td>{$document->get('voted_count')}</td>
        <td>{$document->getRegdate("Y-m-d")}</td>
    </tr>
    <!--@end-->
    </table>
</div>

<!-- 버튼 -->
<div>
    <!--@if($grant->write_document)-->
        <!-- 글쓰기 버튼 -->
        <a href="{getUrl('act','dispBoardWrite','document_srl','')}">[{$lang->cmd_write}]</a> 
    <!--@end-->

    <!--@if($grant->is_admin)-->
        <!-- 문서 관리 버튼 -->
        <a href="#" onclick="popopen('{getUrl('act','dispBoardAdminManageDocument')}','manageDocument'); return false;">[{$lang->cmd_manage_document}]</a> 
    <!--@end-->
</div>

<!--@if($grant->view)-->

<!-- 검색 -->
<div>
    <form action="./" method="get" onsubmit="return procFilter(this, search)">
        <input type="hidden" name="mid" value="{$mid}" />
        <input type="hidden" name="category" value="{$category}" />

        <select name="search_target">
            <!--@foreach($search_option as $key => $val)-->
            <option value="{$key}" <!--@if($search_target==$key)-->selected="selected"<!--@end-->>{$val}</option>
            <!--@end-->
        </select>
        <input type="text" name="search_keyword" value="{htmlspecialchars($search_keyword)}" />
        <input type="submit" value="{$lang->cmd_search}" />
        <input type="button" value="{$lang->cmd_cancel}" onclick="location.href='{getUrl('','mid',$mid)}';return false;"/>
    </form>
</div>

<!-- 페이지 네비게이션 -->
<div>
<a href="{getUrl('page','','document_srl','')}">[{$lang->first_page}]</a>

<!--@while($page_no = $page_navigation->getNextPage())-->
<!--@if($page == $page_no)-->
{$page_no}
<!--@else-->
<a href="{getUrl('page',$page_no,'document_srl','')}">[{$page_no}]</a>
<!--@end-->
<!--@end-->

<a href="{getUrl('page',$page_navigation->last_page,'document_srl','')}">[{$lang->last_page}]</a>
</div>

<!--@end-->

<!--#include("footer.html")-->
